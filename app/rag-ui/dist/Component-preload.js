//@ui5-bundle com/ai/ragui/Component-preload.js
sap.ui.predefine("com/ai/ragui/Component", ["sap/ui/core/UIComponent","com/ai/ragui/model/models"],(e,i)=>{"use strict";return e.extend("com.ai.ragui.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(i.createDeviceModel(),"device");this.getRouter().initialize()}})});
sap.ui.predefine("com/ai/ragui/controller/App.controller", ["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("com.ai.ragui.controller.App",{onInit(){}})});
sap.ui.predefine("com/ai/ragui/controller/BaseController", ["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/base/util/uid","sap/m/MessageBox","sap/m/MessageToast"],(e,t,s,r,l)=>{"use strict";return e.extend("com.ai.ragui.controller.BaseController",{onInit(){},_getServicePath:function(){let e=this.getOwnerComponent().getManifestEntry("/sap.app/id");let t=e.replaceAll(".","/");let s=sap.ui.require.toUrl(t?.replaceAll(".","/"));return s},_getRagResponse:async function(e){let t=this.byId("userInput");let s=t.getValue().trim();if(!s)return;let r=this.getView().getModel("oChatModel");let l=r.getProperty("/list")||[];if(!r.getProperty("/started")){r.setProperty("/started",true)}l.push({type:"query",text:s,busy:false});l.push({type:"response",text:"",busy:true});r.setProperty("/list",l);let n=this;let o=(new Date).toISOString();let i={conversationId:e,messageId:"",message_time:o,user_id:"user_id-24045578",user_query:s};let a=this.getView().getModel();a.bindAction("/getChatRagResponse").execute({data:i}).then(e=>{let t=e.getBoundContext().getObject();let s=r.getProperty("/list")||[];if(s.length>0&&s[s.length-1].busy){s[s.length-1]={type:"response",text:t.content,busy:false};r.setProperty("/list",s)}n.scrollChat()}).catch(e=>{let t=r.getProperty("/list")||[];if(t.length>0&&t[t.length-1].busy){t[t.length-1]={type:"response",text:"Something went wrong.",busy:false};r.setProperty("/list",t)}n.scrollChat()});t.setValue("");n.scrollChat()},onQuickAction:function(e){let t=e.getSource().getText();this.byId("jouleInput").setValue(t);this.onSend()},openFragment:function(e){let s=this.getView();return t.load({id:s.getId(),name:e,controller:this}).then(function(e){s.addDependent(e);return e})},ODataPost:function(e,t){let s=this.getView().getModel();let n=s.bindList(e);let o=n.create(t);o.created().then(()=>{l.show("File Uploaded successfully!")}).catch(e=>{r.error("Error creating data: "+e.message);console.error("Creation error:",e)})},scrollChat:function(){setTimeout(()=>{let e=this.byId("chatScroll");if(e){e.scrollTo(0,1e6,200)}},150)}})});
sap.ui.predefine("com/ai/ragui/controller/Main.controller", ["com/ai/ragui/controller/BaseController","sap/ui/model/json/JSONModel","sap/base/util/uid","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator"],(e,t,s,i,n,o,a)=>{"use strict";return e.extend("com.ai.ragui.controller.Main",{onInit:function(){this._oDSC=this.byId("DynamicSideContent");this._showSideContentButton=this.byId("showSideContentButton");this.flag=0},_getLoggedInUserDetails:function(){let e=this._getServicePath()+"/user-api/currentUser";let s=this;$.ajax({url:e,type:"GET",dataType:"json",async:true,success:function(e){let i=new t(e);s.getView().setModel(i,"UserData")},error:function(){i.show("Fething User Details failed")}})},onAfterRendering:function(){this._getLoggedInUserDetails()},onSendMessage:async function(){if(this.flag===0){this.convId=s();this.flag=1}await this._getRagResponse(this.convId)},onReloadChat:function(){this.convId=s();const e=this.getView().getModel("oChatModel");e.setProperty("/list",[])}})});
sap.ui.predefine("com/ai/ragui/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"com/ai/ragui/i18n/i18n.properties":'# This is the resource bundle for com.ai.ragui\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Chat Bot\n\n#YDES: Application description\nappDescription= A ChatBot application gives the rag responsed based on document context\n#XTIT: Main view title\ntitle=Chat Bot\n\n#XFLD,24\nrag_vector_engine-Display.flpTitle=Chat Bot\n',
	"com/ai/ragui/manifest.json":'{"_version":"1.65.0","sap.app":{"id":"com.ai.ragui","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.18.4","toolsId":"523bb043-820c-40f2-a589-b3bea4fbcf71"},"dataSources":{"mainService":{"uri":"/odata/v4/roadshow/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"rag_vector_engine-Display":{"semanticObject":"rag_vector_engine","action":"Display","title":"{{rag_vector_engine-Display.flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.139.0","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"com.ai.ragui.i18n.i18n","supportedLocales":[""]}},"oChatModel":{"type":"sap.ui.model.json.JSONModel","settings":{},"preload":false},"oLoggedInUser":{"type":"sap.ui.model.json.JSONModel","settings":{},"preload":false},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"com.ai.ragui.view","async":true,"viewPath":"com.ai.ragui.view"},"routes":[{"name":"RouteMain","pattern":":?query:","target":["TargetMain"]}],"targets":{"TargetMain":{"id":"Main","name":"Main"}}},"rootView":{"viewName":"com.ai.ragui.view.App","type":"XML","id":"App","async":true}},"sap.cloud":{"public":true,"service":"rag-vector-engine"}}',
	"com/ai/ragui/view/App.view.xml":'<mvc:View controllerName="com.ai.ragui.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"com/ai/ragui/view/Main.view.xml":'<mvc:View controllerName="com.ai.ragui.controller.Main"\n    xmlns:unified="sap.ui.unified"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:l="sap.ui.layout"\n    xmlns:upload="sap.m.upload"\n    xmlns:mdcat="sap.ui.mdc.actiontoolbar"\n    xmlns:core="sap.ui.core"\n><Page\n                    id="_IDGenPage"\n                    showHeader="false"\n                    showFooter="true"\n                    class="chatPage"\n                    enableScrolling="false"\n                ><HBox\n                        id="_IDGenHBox"\n                        class="header"\n                        justifyContent="SpaceBetween"\n                        alignItems="Center"\n                    ><HBox\n                            id="_IDGenHBox1"\n                            class="modelSelector"\n                            alignItems="Center"\n                        ><core:Icon\n                                id="_IDGenIcon"\n                                src="sap-icon://da"\n                                size="1.5rem"\n                                class="dropdownArrow"\n                            /><Text\n                                id="_IDGenText"\n                                text="ChatBot"\n                                class="modelText"\n                            /></HBox><HBox\n                            id="_IDGenHBox2"\n                            alignItems="Center"\n                        ><HBox id="_IDGenHBox3"><core:Icon\n                                    id="_IDGenIcon1"\n                                    class="headerBtn sapUiLargeMarginLeft"\n                                    src="sap-icon://refresh"\n                                    press=".onReloadChat"\n                                /></HBox></HBox></HBox><ScrollContainer\n                        busyIndicatorDelay="1000"\n                        id="chatScroll"\n                        height="75%"\n                        class="chatConversation"\n                        vertical="true"\n                        horizontal="false"\n                        focusable="false"\n                        width="100%"\n                    ><VBox\n                            id="_IDGenVBox"\n                            class="customMainBox"\n                            fitContainer="true"\n                            width="100%"\n                        ><VBox\n                                id="_IDGenVBox1"\n                                alignItems="Center"\n                                justifyContent="Center"\n                                class="greetingBox"\n                            ><Text\n                                    id="_IDGenText1"\n                                    text="{= ${UserData>/firstname} ? \'Hello, \' + ${UserData>/firstname} : \'Hello\' }"\n                                    class="greetingText"\n                                /></VBox><VBox\n                                id="messagesVBox"\n                                items="{oChatModel>/list}"\n                                width="100%"\n                            ><HBox\n                                    id="_IDGenHBox4"\n                                    width="100%"\n                                    class="chatRow"\n                                    justifyContent="{= ${oChatModel>type} === \'query\' ? \'End\' : \'Start\'}"\n                                ><HBox\n                                        id="_IDGenHBox5"\n                                        visible="{= ${oChatModel>type} === \'query\'}"\n                                        class="bubbleRow sapUiSmallMarginTop sapUiSmallMarginBottom"\n                                        alignItems="End"\n                                        width="auto"\n                                    ><Text\n                                            id="_IDGenText2"\n                                            renderWhitespace="false"\n                                            textAlign="Begin"\n                                            textDirection="LTR"\n                                            text="{oChatModel>text}"\n                                            class="userMessage"\n                                            width="auto"\n                                            wrapping="true"\n                                        /><core:Icon\n                                            id="_IDGenIcon3"\n                                            src="sap-icon://person-placeholder"\n                                            size="1.5rem"\n                                            class="sapUiTinyMarginBeginEnd"\n                                        /></HBox><HBox\n                                        id="_IDGenHBox6"\n                                        visible="{= ${oChatModel>type} === \'response\'}"\n                                        class="bubbleRow sapUiSmallMarginTop sapUiSmallMarginBottom"\n                                        alignItems="End"\n                                        width="100%"\n                                    ><core:Icon\n                                            id="_IDGenIcon4"\n                                            src="sap-icon://da"\n                                            size="1.5rem"\n                                            class="sapUiTinyMarginBeginEnd"\n                                        /><FormattedText\n                                            id="_IDGenFormattedText"\n                                            htmlText="{oChatModel>text}"\n                                            busy="{oChatModel>busy}"\n                                            class="assistantMessage"\n                                            width="90%"\n                                        /></HBox></HBox></VBox></VBox></ScrollContainer><footer><Toolbar\n                            class="greetingBox"\n                            id="_IDGenToolbar"\n                            height="auto"\n                            design="Solid"\n                            width="95%"\n                        ><FeedInput\n                                class="customInputHeight"\n                                id="userInput"\n                                placeholder="Ask anything ..."\n                                post=".onSendMessage"\n                            /></Toolbar></footer></Page></mvc:View>'
});
//# sourceMappingURL=Component-preload.js.map
