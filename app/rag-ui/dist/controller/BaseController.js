sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/base/util/uid","sap/m/MessageBox","sap/m/MessageToast"],(e,t,r,s,o)=>{"use strict";return e.extend("com.ai.ragui.controller.BaseController",{onInit(){},_getServicePath:function(){let e=this.getOwnerComponent().getManifestEntry("/sap.app/id");let t=e.replaceAll(".","/");let r=sap.ui.require.toUrl(t?.replaceAll(".","/"));return r},_getRagResponse:async function(e){let t=this.byId("userInput");let r=t.getValue().trim();if(!r)return;let s=this.getView().getModel("oChatModel");let o=s.getProperty("/list")||[];if(!s.getProperty("/started")){s.setProperty("/started",true)}o.push({type:"query",text:r,busy:false});o.push({type:"response",text:"",busy:true});s.setProperty("/list",o);let n=this;let l=(new Date).toISOString();let i={conversationId:e,messageId:"",message_time:l,user_id:"user_id-24045578",user_query:r};$.ajax({url:this._getServicePath()+"/odata/v4/roadshow/getChatRagResponse",type:"POST",contentType:"application/json",data:JSON.stringify(i),success:function(e){let t=s.getProperty("/list")||[];if(t.length>0&&t[t.length-1].busy){t[t.length-1]={type:"response",text:e.content,busy:false};s.setProperty("/list",t)}n.scrollChat()},error:function(){let e=s.getProperty("/list")||[];if(e.length>0&&e[e.length-1].busy){e[e.length-1]={type:"response",text:"Something went wrong.",busy:false};s.setProperty("/list",e)}n.scrollChat()}});t.setValue("");n.scrollChat()},onQuickAction:function(e){let t=e.getSource().getText();this.byId("jouleInput").setValue(t);this.onSend()},openFragment:function(e){let r=this.getView();return t.load({id:r.getId(),name:e,controller:this}).then(function(e){r.addDependent(e);return e})},ODataPost:function(e,t){let r=this.getView().getModel();let n=r.bindList(e);let l=n.create(t);l.created().then(()=>{o.show("File Uploaded successfully!")}).catch(e=>{s.error("Error creating data: "+e.message);console.error("Creation error:",e)})},scrollChat:function(){setTimeout(()=>{let e=this.byId("chatScroll");if(e){e.scrollTo(0,1e6,200)}},150)}})});
//# sourceMappingURL=BaseController.js.map