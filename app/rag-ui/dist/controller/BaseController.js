sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/base/util/uid","sap/m/MessageBox","sap/m/MessageToast"],(e,t,s,r,l)=>{"use strict";return e.extend("com.ai.ragui.controller.BaseController",{onInit(){},_getServicePath:function(){let e=this.getOwnerComponent().getManifestEntry("/sap.app/id");let t=e.replaceAll(".","/");let s=sap.ui.require.toUrl(t?.replaceAll(".","/"));return s},_getRagResponse:async function(e){let t=this.byId("userInput");let s=t.getValue().trim();if(!s)return;let r=this.getView().getModel("oChatModel");let l=r.getProperty("/list")||[];if(!r.getProperty("/started")){r.setProperty("/started",true)}l.push({type:"query",text:s,busy:false});l.push({type:"response",text:"",busy:true});r.setProperty("/list",l);let n=this;let o=(new Date).toISOString();let i={conversationId:e,messageId:"",message_time:o,user_id:"user_id-24045578",user_query:s};let a=this.getView().getModel();a.bindAction("/getChatRagResponse").execute({data:i}).then(e=>{let t=e.getBoundContext().getObject();let s=r.getProperty("/list")||[];if(s.length>0&&s[s.length-1].busy){s[s.length-1]={type:"response",text:t.content,busy:false};r.setProperty("/list",s)}n.scrollChat()}).catch(e=>{let t=r.getProperty("/list")||[];if(t.length>0&&t[t.length-1].busy){t[t.length-1]={type:"response",text:"Something went wrong.",busy:false};r.setProperty("/list",t)}n.scrollChat()});t.setValue("");n.scrollChat()},onQuickAction:function(e){let t=e.getSource().getText();this.byId("jouleInput").setValue(t);this.onSend()},openFragment:function(e){let s=this.getView();return t.load({id:s.getId(),name:e,controller:this}).then(function(e){s.addDependent(e);return e})},ODataPost:function(e,t){let s=this.getView().getModel();let n=s.bindList(e);let o=n.create(t);o.created().then(()=>{l.show("File Uploaded successfully!")}).catch(e=>{r.error("Error creating data: "+e.message);console.error("Creation error:",e)})},scrollChat:function(){setTimeout(()=>{let e=this.byId("chatScroll");if(e){e.scrollTo(0,1e6,200)}},150)}})});
//# sourceMappingURL=BaseController.js.map